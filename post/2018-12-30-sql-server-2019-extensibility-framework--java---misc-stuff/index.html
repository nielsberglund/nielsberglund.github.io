<!DOCTYPE html>
<html lang="en-us">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    
    <meta property="og:site_name" content="Niels Berglund">
    <meta property="og:type" content="article">

    
    <meta property="og:image" content="https://nielsberglund.com/images/banner/main-banner-2.jpg">
    <meta property="twitter:image" content="https://nielsberglund.com/images/banner/main-banner-2.jpg" />
    

    
    <meta name="title" content="SQL Server 2019 Extensibility Framework &amp; Java - Misc. &#39;Stuff&#39;" />
    <meta property="og:title" content="SQL Server 2019 Extensibility Framework &amp; Java - Misc. &#39;Stuff&#39;" />
    <meta property="twitter:title" content="SQL Server 2019 Extensibility Framework &amp; Java - Misc. &#39;Stuff&#39;" />
    

    
    <meta name="description" content="We look at SQL Server 2019 Java Extensions, and Java packages, the CLASSPATH and JAR files!">
    <meta property="og:description" content="We look at SQL Server 2019 Java Extensions, and Java packages, the CLASSPATH and JAR files!" />
    <meta property="twitter:description" content="We look at SQL Server 2019 Java Extensions, and Java packages, the CLASSPATH and JAR files!" />
    

    
    <meta property="twitter:card" content="summary" />
    
    

    <meta name="keyword"  content="SQL Server, .NET, Kafka, Streaming, Azure Data Explorer, AI/ML">
    <link rel="shortcut icon" href="/img/favicon.ico">

    <title>SQL Server 2019 Extensibility Framework &amp; Java - Misc. &#39;Stuff&#39; | Niels Berglund</title>

    <link rel="canonical" href="/post/2018-12-30-sql-server-2019-extensibility-framework--java---misc-stuff/">

    
    
    
    <link rel="stylesheet" href="/css/bootstrap.min.css">

    
    <link rel="stylesheet" href="/css/hugo-theme-cleanwhite.min.css">

    
    <link rel="stylesheet" href="/css/zanshang.css">

    
    <link href="https://cdn.jsdelivr.net/gh/FortAwesome/Font-Awesome@5.15.1/css/all.css" rel="stylesheet" type="text/css">

    
    

    
    <script src="/js/jquery.min.js"></script>

    
    <script src="/js/bootstrap.min.js"></script>

    
    <script src="/js/hux-blog.min.js"></script>

    
    <script src="/js/lazysizes.min.js"></script>

    
    

</head>



<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
	ga('create', 'UA-18914734-2', 'auto');
	
	ga('send', 'pageview');
}
</script>





<nav class="navbar navbar-default navbar-custom navbar-fixed-top">

    <div class="container-fluid">
        
        <div class="navbar-header page-scroll">
            <button type="button" class="navbar-toggle">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="/">Niels Berglund</a>
        </div>

        
        
        <div id="huxblog_navbar">
            <div class="navbar-collapse">
                <ul class="nav navbar-nav navbar-right">
                    <li>
                        <a href="/">All Posts</a>
                    </li>
                    
                    
		    
                        <li><a href="/series/">BLOG SERIES</a></li>
                    
                        <li><a href="/top/about/">ABOUT ME</a></li>
                    
                        <li><a href="/top/archive/">ARCHIVE</a></li>
                    
                        <li><a href="/top/disclaimer/">DISCLAIMER</a></li>
                    
		            <li>
                        <a href="/search"><i class="fa fa-search"></i></a>
		           </li>
                </ul>
            </div>
        </div>
        
    </div>
    
</nav>
<script>
    
    
    
    var $body   = document.body;
    var $toggle = document.querySelector('.navbar-toggle');
    var $navbar = document.querySelector('#huxblog_navbar');
    var $collapse = document.querySelector('.navbar-collapse');

    $toggle.addEventListener('click', handleMagic)
    function handleMagic(e){
        if ($navbar.className.indexOf('in') > 0) {
        
            $navbar.className = " ";
            
            setTimeout(function(){
                
                if($navbar.className.indexOf('in') < 0) {
                    $collapse.style.height = "0px"
                }
            },400)
        }else{
        
            $collapse.style.height = "auto"
            $navbar.className += " in";
        }
    }
</script>




<style type="text/css">
    header.intro-header {
        background-image: url('/images/banner/main-banner-2.jpg')
    }
</style>

<header class="intro-header" >

    <div class="container">
        <div class="row">
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                <div class="post-heading">
                    <div class="tags">
                        
                        <a class="tag" href="/tags/sql-server-machine-learning-services" title="SQL Server Machine Learning Services">
                            SQL Server Machine Learning Services
                        </a>
                        
                        <a class="tag" href="/tags/sql-server-2019" title="SQL Server 2019">
                            SQL Server 2019
                        </a>
                        
                        <a class="tag" href="/tags/r" title="R">
                            R
                        </a>
                        
                        <a class="tag" href="/tags/python" title="Python">
                            Python
                        </a>
                        
                        <a class="tag" href="/tags/java" title="Java">
                            Java
                        </a>
                        
                        <a class="tag" href="/tags/sql-server-extensibility-framework" title="SQL Server Extensibility Framework">
                            SQL Server Extensibility Framework
                        </a>
                        
                        <a class="tag" href="/tags/java-packages" title="Java packages">
                            Java packages
                        </a>
                        
                        <a class="tag" href="/tags/jar-files" title="JAR files">
                            JAR files
                        </a>
                        
                    </div>
                    <h1>SQL Server 2019 Extensibility Framework &amp; Java - Misc. &#39;Stuff&#39;</h1>
                    <h2 class="subheading"></h2>
                    <span class="meta">
                        
                            Posted by 
                            
                                nielsb
                             
                            on 
                            Sunday, December 30, 2018
                            
                            
                            
                            
                    </span>
                </div>
            </div>
        </div>
    </div>
</header>




<article>
    <div class="container">
        <div class="row">

            
            <div class="
                col-lg-8 col-lg-offset-2
                col-md-10 col-md-offset-1
                post-container">

                
                <p>This post is the fourth post in a series where I look at the Java extension in SQL Server, i.e. the ability to execute Java code from inside SQL Server.</p>
<p>To see what other posts there are in the series, go to <a href="/s2k19_ext_framework_java"><strong>SQL Server 2019 Extensibility Framework &amp; Java</strong></a>.</p>
<p>This fourth post acts as a &ldquo;roundup&rdquo; of miscellaneous &ldquo;stuff&rdquo; I did not cover in the three previous posts, and some of the things we look at are:</p>
<ul>
<li>Java packages.</li>
<li>The <code>CLASSPATH</code> environment variable.</li>
<li>JAR files.</li>
</ul>
<p>Ok, let us get into it.</p>
<blockquote>
<p><strong>DISCLAIMER:</strong> <em>This post contains Java code. I am not a Java guy, in fact, the only Java I have ever written is the code in this post and the previous <strong>SQL Server 2019 Java</strong> posts. So, the code is not elegant in any shape or form, and I am absolutely certain it can be done in a much better way. However, this is not about Java as such, but how you call Java code from SQL Server, and what you need to implement on the Java side.</em></p>
</blockquote>
<h2 id="java-packages">Java Packages</h2>
<p>We use packages in Java to prevent naming conflicts, to control access, to make searching/locating and usage of classes, interfaces, enumerations and annotations easier, etc. A Java package is somewhat similar to a .NET namespace in that it can be used to group &ldquo;like-minded&rdquo; classes etc. together.</p>
<p>In <a href="/post/2018-12-02-sql-server-2019-extensibility-framework--java---hello-world/">SQL Server 2019 Extensibility Framework &amp; Java - Hello World</a> we saw some code looking like so:</p>
<div class="highlight"><div style="color:#586e75;background-color:#eee8d5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#586e75;background-color:#eee8d5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#586e75;background-color:#eee8d5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#859900">public</span> <span style="color:#859900">class</span> <span style="color:#cb4b16">JavaTest1</span> {
</span></span><span style="display:flex;"><span>  <span style="color:#859900">public</span> <span style="color:#859900">static</span> <span style="color:#859900;font-weight:bold">short</span> <span style="color:#268bd2">numberOfOutputCols</span>;
</span></span><span style="display:flex;"><span>  <span style="color:#859900">public</span> <span style="color:#859900">static</span> <span style="color:#859900;font-weight:bold">int</span> <span style="color:#268bd2">x</span>;
</span></span><span style="display:flex;"><span>  <span style="color:#859900">public</span> <span style="color:#859900">static</span> <span style="color:#859900;font-weight:bold">int</span> <span style="color:#268bd2">y</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#859900">public</span> <span style="color:#859900">static</span> <span style="color:#859900;font-weight:bold">void</span> <span style="color:#268bd2">adder</span>() {
</span></span><span style="display:flex;"><span>    <span style="color:#268bd2">System</span>.<span style="color:#268bd2">out</span>.<span style="color:#268bd2">printf</span>(<span style="color:#2aa198">&#34;The result of adding %d and %d = %d&#34;</span>, <span style="color:#268bd2">x</span>, <span style="color:#268bd2">y</span>, <span style="color:#268bd2">x</span> + <span style="color:#268bd2">y</span>);   
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#859900">public</span> <span style="color:#859900">static</span> <span style="color:#859900;font-weight:bold">void</span> <span style="color:#268bd2">helloWorld</span>() {
</span></span><span style="display:flex;"><span>    <span style="color:#268bd2">System</span>.<span style="color:#268bd2">out</span>.<span style="color:#268bd2">print</span>(<span style="color:#2aa198">&#34;Hello World from SQL Java&#34;</span>);
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p><strong>Code Snippet 1:</strong> <em>Sample Code</em></p>
<p>As we see in <em>Code Snippet 1</em>, we have one class: <code>JavaTest1</code> with two methods:</p>
<ul>
<li>The method <code>adder</code> which adds two integers together.</li>
<li>The <code>helloWorld</code> method which says hello.</li>
</ul>
<p>Let us break out the <code>adder</code> method, and put it into a class of its own - <code>Calculator</code>:</p>
<div class="highlight"><div style="color:#586e75;background-color:#eee8d5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#586e75;background-color:#eee8d5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#586e75;background-color:#eee8d5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#859900">public</span> <span style="color:#859900">class</span> <span style="color:#cb4b16">Calculator</span> {
</span></span><span style="display:flex;"><span>  <span style="color:#859900">public</span> <span style="color:#859900">static</span> <span style="color:#859900;font-weight:bold">short</span> <span style="color:#268bd2">numberOfOutputCols</span>;
</span></span><span style="display:flex;"><span>  <span style="color:#859900">public</span> <span style="color:#859900">static</span> <span style="color:#859900;font-weight:bold">int</span> <span style="color:#268bd2">x</span>;
</span></span><span style="display:flex;"><span>  <span style="color:#859900">public</span> <span style="color:#859900">static</span> <span style="color:#859900;font-weight:bold">int</span> <span style="color:#268bd2">y</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#859900">public</span> <span style="color:#859900">static</span> <span style="color:#859900;font-weight:bold">void</span> <span style="color:#268bd2">adder</span>() {
</span></span><span style="display:flex;"><span>    <span style="color:#268bd2">System</span>.<span style="color:#268bd2">out</span>.<span style="color:#268bd2">printf</span>(<span style="color:#2aa198">&#34;The result of adding %d and %d = %d&#34;</span>, 
</span></span><span style="display:flex;"><span>                        <span style="color:#268bd2">x</span>, <span style="color:#268bd2">y</span>, <span style="color:#268bd2">x</span> + <span style="color:#268bd2">y</span>);
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p><strong>Code Snippet 2:</strong> <em>Calculator - I</em></p>
<p>We assume the code in <em>Code Snippet 2</em> is in a source file: <code>Calculator.java</code>. We then compile the code into a <code>.class</code> file: <code>javac Calculator.java</code>, and after the compile, we move the <code>Calculator.class</code> to the <code>CLASSPATH</code> location.</p>
<blockquote>
<p><strong>NOTE:</strong> If you wonder why the <code>adder</code> method has no parameters, why we have two class members, <code>x</code> and <code>y</code>, and what is this <code>CLASSPATH</code> thing about, go back to <a href="/post/2018-12-02-sql-server-2019-extensibility-framework--java---hello-world/">SQL Server 2019 Extensibility Framework &amp; Java - Hello World</a> where it is all explained.</p>
</blockquote>
<p>To execute the code in <em>Code Snippet 2</em> we use more or less the same code as in <a href="/post/2018-12-02-sql-server-2019-extensibility-framework--java---hello-world/">Hello World</a>:</p>
<div class="highlight"><div style="color:#586e75;background-color:#eee8d5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#586e75;background-color:#eee8d5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">6
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">7
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">8
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#586e75;background-color:#eee8d5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#859900">DECLARE</span> @<span style="color:#268bd2">p1</span> <span style="color:#cb4b16">int</span> = <span style="color:#2aa198;font-weight:bold">21</span>;
</span></span><span style="display:flex;"><span><span style="color:#859900">DECLARE</span> @<span style="color:#268bd2">p2</span> <span style="color:#cb4b16">int</span> = <span style="color:#2aa198;font-weight:bold">21</span>;
</span></span><span style="display:flex;"><span><span style="color:#859900">EXEC</span> <span style="color:#268bd2">sp_execute_external_script</span>
</span></span><span style="display:flex;"><span>  @<span style="color:#859900">language</span> = <span style="color:#268bd2">N</span><span style="color:#2aa198">&#39;Java&#39;</span>
</span></span><span style="display:flex;"><span>, @<span style="color:#268bd2">script</span> = <span style="color:#268bd2">N</span><span style="color:#2aa198">&#39;Calculator.adder&#39;</span>
</span></span><span style="display:flex;"><span>, @<span style="color:#268bd2">params</span> = <span style="color:#268bd2">N</span><span style="color:#2aa198">&#39;@x int, @y int&#39;</span>
</span></span><span style="display:flex;"><span>, @<span style="color:#268bd2">x</span> = @<span style="color:#268bd2">p1</span>
</span></span><span style="display:flex;"><span>, @<span style="color:#268bd2">y</span> = @<span style="color:#268bd2">p2</span> 
</span></span></code></pre></td></tr></table>
</div>
</div><p><strong>Code Snippet 3:</strong> <em>Execute adder Method</em></p>
<p>In <em>Code Snippet 3</em> we see how we send in two parameters to the java code, and how we call the <code>Calculator.adder</code> method. All works ok, and we get back a result. This application is now deployed, but after a while someone creates a new and better calculator:</p>
<div class="highlight"><div style="color:#586e75;background-color:#eee8d5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#586e75;background-color:#eee8d5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#586e75;background-color:#eee8d5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#859900">public</span> <span style="color:#859900">class</span> <span style="color:#cb4b16">Calculator</span> {
</span></span><span style="display:flex;"><span>  <span style="color:#859900">public</span> <span style="color:#859900">static</span> <span style="color:#859900;font-weight:bold">short</span> <span style="color:#268bd2">numberOfOutputCols</span>;
</span></span><span style="display:flex;"><span>  <span style="color:#859900">public</span> <span style="color:#859900">static</span> <span style="color:#859900;font-weight:bold">int</span> <span style="color:#268bd2">x</span>;
</span></span><span style="display:flex;"><span>  <span style="color:#859900">public</span> <span style="color:#859900">static</span> <span style="color:#859900;font-weight:bold">int</span> <span style="color:#268bd2">y</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#859900">static</span> <span style="color:#859900">public</span> <span style="color:#859900;font-weight:bold">int</span>[] <span style="color:#268bd2">outputDataCol1</span>;
</span></span><span style="display:flex;"><span>  <span style="color:#859900">static</span> <span style="color:#859900">public</span> <span style="color:#859900;font-weight:bold">boolean</span>[][] <span style="color:#268bd2">outputNullMap</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#859900">static</span> <span style="color:#859900">public</span> <span style="color:#859900;font-weight:bold">short</span> <span style="color:#268bd2">numberOfOutputCols</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#859900">public</span> <span style="color:#859900">static</span> <span style="color:#859900;font-weight:bold">void</span> <span style="color:#268bd2">adder</span>() {
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#268bd2">numberOfOutputCols</span> = <span style="color:#2aa198;font-weight:bold">1</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#268bd2">outputDataCol1</span> = <span style="color:#859900">new</span> <span style="color:#859900;font-weight:bold">int</span>[<span style="color:#2aa198;font-weight:bold">1</span>];
</span></span><span style="display:flex;"><span>    <span style="color:#268bd2">outputDataCol1</span>[<span style="color:#2aa198;font-weight:bold">0</span>] = <span style="color:#268bd2">x</span> + <span style="color:#268bd2">y</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#268bd2">outputNullMap</span> = <span style="color:#859900">new</span> <span style="color:#859900;font-weight:bold">boolean</span>[<span style="color:#2aa198;font-weight:bold">1</span>][<span style="color:#2aa198;font-weight:bold">1</span>];
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p><strong>Code Snippet 4:</strong> <em>Calculator - II</em></p>
<p>The new and better calculator, as we see in <em>Code Snippet 4</em>, still takes two class members, but now returns the result as a one column resultset. As we did with the code in <em>Code Snippet 2</em> we put it into a source file, <code>Calculator.java</code> and compile it into <code>Calculator.class</code>. Ok, so far so good. However, what if we try and copy the <code>.class</code> file to the <code>CLASSPATH</code> location, then we overwrite the existing <code>Calculator.class</code>. Not good!</p>
<p>This issue can potentially be resolved by having multiple <code>CLASSPATH</code> locations and copy the <code>.class</code> file to another location, but doing it that way would not guarantee which version of the application we call. That&rsquo;s where Java packages come to the rescue. Change the code in <em>Code Snippet 4</em> slightly:</p>
<div class="highlight"><div style="color:#586e75;background-color:#eee8d5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#586e75;background-color:#eee8d5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">6
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">7
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">8
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">9
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#586e75;background-color:#eee8d5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#dc322f;font-weight:bold">package</span> <span style="color:#268bd2">mycalculator</span>
</span></span><span style="display:flex;"><span><span style="color:#859900">public</span> <span style="color:#859900">class</span> <span style="color:#cb4b16">Calculator</span> {
</span></span><span style="display:flex;"><span>  
</span></span><span style="display:flex;"><span>  ...
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#859900">public</span> <span style="color:#859900">static</span> <span style="color:#859900;font-weight:bold">void</span> <span style="color:#268bd2">adder</span>() {
</span></span><span style="display:flex;"><span>    <span style="color:#2aa198">&#39;&#39;&#39;</span>
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p><strong>Code Snippet 5:</strong> <em>Calculator &amp; Package</em></p>
<p>In <em>Code Snippet 5</em> we added at the top of the source file: <code>package mycalculator</code>. Ok, so what does this do? Let us experiment:</p>
<ul>
<li>Compile <code>Calculator.java</code> as usual (the edited one).</li>
<li>Rename the <code>Calculator.class</code> file in the <code>CLASSPATH</code> location to something different, (like <code>Calcuator.xxx</code>).</li>
</ul>
<p>After copying the newly compiled <code>Calculator.class</code> to the <code>CLASSPATH</code> location, execute the code in <em>Code Snippet 3</em> again and see if it works:</p>
<p>
  <img src="/images/posts/sql_2k19_java_misc_error1.png" alt="">

</p>
<p><strong>Figure 1:</strong> <em>Cannot Find Class</em></p>
<p>So that didn&rsquo;t work! We see in <em>Figure 1</em> how we get an exception, saying something about not finding class <code>Calculator</code>. Seeing that the code now includes a package name, and reading-up some more about packages, maybe I should include the package name as well in the <code>@script</code> parameter: <code>@script = N'mycalculator.Calculator.adder</code>.</p>
<p>When we try that it still does not work, but I get a somewhat different error message: <code>... Failed to find class mycalculator/Calculator</code>. That error message almost seems like a path. Let us create a directory in the <code>CLASSPATH</code> location named as our package, <code>mycalculator</code>, and move the <code>.class</code> file to there, and see what happens when we execute (still with <code>@script = N'mycalculator.Calculator.adder</code>):</p>
<p>
  <img src="/images/posts/sql_2k19_java_misc_pkg_success.png" alt="">

</p>
<p><strong>Figure 2:</strong> <em>Package Success</em></p>
<p>As we see in <em>Figure 2</em>, it works! So, if you compile into packages you need to:</p>
<ul>
<li>Place the code in a directory named as the package in the <code>CLASSPATH</code> location.</li>
<li>Execute the code with the package name in the <code>@script</code> variable: <code>@script=N'packagename.ClassName.methodName</code>.</li>
</ul>
<blockquote>
<p><strong>NOTE:</strong> The Java compiler can automatically create the directory for the package by using the <code>-d</code> option. If you are new to Java (like me), I can recommend <a href="https://www.guru99.com/java-packages.html">this site</a> to read more about packages.</p>
</blockquote>
<h2 id="classpath">CLASSPATH</h2>
<p>In <a href="/post/2018-12-02-sql-server-2019-extensibility-framework--java---hello-world/">SQL Server 2019 Extensibility Framework &amp; Java - Hello World</a> we discussed the <code>CLASSPATH</code> environment variable briefly. We said that the <code>CLASSPATH</code> variable is there so that the Java Compiler and Java Runtime can find Java classes referenced in your program. It maintains a list of directories (containing many Java class files) and JAR file (a single-file archive of Java classes), and in all of the SQL 2019 Java posts we have copied our <code>.class</code> files to the location of the <code>CLASSPATH</code> variable.</p>
<p>However, when you execute a Java application from the command line you do not have to rely on the <code>CLASSPATH</code> variable, but you can define where to find the application by the <code>-cp</code> option:</p>
<div class="highlight"><div style="color:#586e75;background-color:#eee8d5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#586e75;background-color:#eee8d5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#586e75;background-color:#eee8d5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>W:<span style="color:#2aa198">\&gt;</span>java -cp .<span style="color:#2aa198">\n</span>ielsb-work<span style="color:#2aa198">\G</span>itHub-Repos<span style="color:#2aa198">\n</span>ielsberglund.com <span style="color:#2aa198">\
</span></span></span><span style="display:flex;"><span><span style="color:#2aa198"></span>               <span style="color:#2aa198">\_</span>code<span style="color:#2aa198">\s</span>ql_2k19_java_misc<span style="color:#2aa198">\j</span>ava Calculator<span style="color:#2aa198">`</span>.
</span></span></code></pre></td></tr></table>
</div>
</div><p><strong>Code Snippet 6:</strong> <em>Usage of -cp Option</em></p>
<p>In <em>Code Snippet 6</em> we see how we, from the root of <code>W:\</code>, call the <code>Calculator</code> application by setting the <code>-cp</code> option to where the application is.</p>
<blockquote>
<p><strong>NOTE:</strong> When calling the application as in <em>Code Snippet 6</em>, the application has to have a <code>main</code> method: <code>public static void main(String[] args)</code>.</p>
</blockquote>
<p>When executing <code>sp_execute_external_script</code> we have the same functionality. We do this by defining, in <code>sp_execute_external_script</code>&rsquo;s <code>@params</code> parameter list, a parameter <code>@CLASSPATH</code>, something like so:</p>
<div class="highlight"><div style="color:#586e75;background-color:#eee8d5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#586e75;background-color:#eee8d5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#586e75;background-color:#eee8d5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#859900">EXEC</span> <span style="color:#268bd2">sp_execute_external_script</span>
</span></span><span style="display:flex;"><span>  @<span style="color:#859900">language</span> = <span style="color:#268bd2">N</span><span style="color:#2aa198">&#39;Java&#39;</span>
</span></span><span style="display:flex;"><span>, @<span style="color:#268bd2">script</span> = <span style="color:#268bd2">N</span><span style="color:#2aa198">&#39;some_method&#39;</span>
</span></span><span style="display:flex;"><span>, @<span style="color:#268bd2">params</span> = <span style="color:#268bd2">N</span><span style="color:#2aa198">&#39;@CLASSPATH nvarchar(256)&#39;</span>
</span></span><span style="display:flex;"><span>, @<span style="color:#268bd2">CLASSPATH</span> = <span style="color:#268bd2">N</span><span style="color:#2aa198">&#39;my_path_to_app`
</span></span></span></code></pre></td></tr></table>
</div>
</div><p><strong>Code Snippet 7:</strong> <em>Execute with Classpath</em></p>
<p>So, we see, in <em>Code Snippet 7</em>, how we define the <code>@CLASSPATH</code> parameter, and set it to a value. The parameter is a well-known parameter to the Java extension components, and they know how to handle it. The <code>@CLASSPATH</code> parameter is similar to <code>@r_rowsPerRead</code>, for the R/Python components. In <a href="/post/2018-03-21-microsoft-sql-server-r-services---sp-execute-external-script---iii/">Microsoft SQL Server R Services: sp_execute_external_script - III</a> you can read more about <code>@r_rowsPerRead</code>.</p>
<blockquote>
<p><strong>NOTE:</strong> The <code>@r_rowsPerRead</code> parameter is not supported in the Java extensions.</p>
</blockquote>
<p>To see how to use the <code>@CLASSPATH</code> parameter, (and some &ldquo;gotchas&rdquo;), we create two almost identical applications:</p>
<div class="highlight"><div style="color:#586e75;background-color:#eee8d5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#586e75;background-color:#eee8d5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#586e75;background-color:#eee8d5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#93a1a1;font-style:italic">// this is the first app
</span></span></span><span style="display:flex;"><span><span style="color:#93a1a1;font-style:italic"></span><span style="color:#859900">public</span> <span style="color:#859900">class</span> <span style="color:#cb4b16">Hello</span> {
</span></span><span style="display:flex;"><span>  
</span></span><span style="display:flex;"><span>  <span style="color:#859900">public</span> <span style="color:#859900">static</span> <span style="color:#859900;font-weight:bold">short</span> <span style="color:#268bd2">numberOfOutputCols</span>;
</span></span><span style="display:flex;"><span>  <span style="color:#859900">public</span> <span style="color:#859900">static</span> <span style="color:#859900;font-weight:bold">void</span> <span style="color:#268bd2">world</span>() {
</span></span><span style="display:flex;"><span>    <span style="color:#268bd2">System</span>.<span style="color:#268bd2">out</span>.<span style="color:#268bd2">print</span>(<span style="color:#2aa198">&#34;Hello World 1 from SQL Java&#34;</span>);
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#93a1a1;font-style:italic">// this is the second app
</span></span></span><span style="display:flex;"><span><span style="color:#93a1a1;font-style:italic"></span><span style="color:#859900">public</span> <span style="color:#859900">class</span> <span style="color:#cb4b16">Hello</span> {
</span></span><span style="display:flex;"><span>  
</span></span><span style="display:flex;"><span>  <span style="color:#859900">public</span> <span style="color:#859900">static</span> <span style="color:#859900;font-weight:bold">short</span> <span style="color:#268bd2">numberOfOutputCols</span>;
</span></span><span style="display:flex;"><span>  <span style="color:#859900">public</span> <span style="color:#859900">static</span> <span style="color:#859900;font-weight:bold">void</span> <span style="color:#268bd2">world</span>() {
</span></span><span style="display:flex;"><span>    <span style="color:#268bd2">System</span>.<span style="color:#268bd2">out</span>.<span style="color:#268bd2">print</span>(<span style="color:#2aa198">&#34;Hello World 2 from SQL Java&#34;</span>);
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p><strong>Code Snippet 8:</strong> <em>Java Apps</em></p>
<p>In <em>Code Snippet 8</em> we see both applications (I put them in one code snippet to save space). The only difference between them is what we print out to the &ldquo;console&rdquo;. Copy the two classes into two separate source files (<code>Hello.java</code>), compile and copy the first <code>Hello.class</code> to the location which the <code>@CLASSPATH</code> environment variable points to. Create a new directory, (<code>testpath</code> or something like so), and copy the second <code>Hello.class</code> to that directory.</p>
<p>To be sure that we start afresh, restart the <em>Launchpad</em> service, and then execute:</p>
<div class="highlight"><div style="color:#586e75;background-color:#eee8d5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#586e75;background-color:#eee8d5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#586e75;background-color:#eee8d5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#859900">EXEC</span> <span style="color:#268bd2">sp_execute_external_script</span>
</span></span><span style="display:flex;"><span>  @<span style="color:#859900">language</span> = <span style="color:#268bd2">N</span><span style="color:#2aa198">&#39;Java&#39;</span>
</span></span><span style="display:flex;"><span>, @<span style="color:#268bd2">script</span> = <span style="color:#268bd2">N</span><span style="color:#2aa198">&#39;Hello.world&#39;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><strong>Code Snippet 9:</strong> <em>Execute against CLASSPATH Environment Variable</em></p>
<p>The code in <em>Code Snippet 9</em> succeeds and returns <code>Hello World 1 from SQL Java</code>, cool. When we executed, the Java runtime found the code in the <code>CLASSPATH</code> location.</p>
<p>Rename the <code>Hello.class</code> file in the <code>CLASSPATH</code> location to something like <code>Hello2.xxx</code>, and now we use code like so:</p>
<div class="highlight"><div style="color:#586e75;background-color:#eee8d5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#586e75;background-color:#eee8d5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#586e75;background-color:#eee8d5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#859900">EXEC</span> <span style="color:#268bd2">sp_execute_external_script</span>
</span></span><span style="display:flex;"><span>  @<span style="color:#859900">language</span> = <span style="color:#268bd2">N</span><span style="color:#2aa198">&#39;Java&#39;</span>
</span></span><span style="display:flex;"><span>, @<span style="color:#268bd2">script</span> = <span style="color:#268bd2">N</span><span style="color:#2aa198">&#39;Hello.world&#39;</span>
</span></span><span style="display:flex;"><span>, @<span style="color:#268bd2">params</span> = <span style="color:#268bd2">N</span><span style="color:#2aa198">&#39;@CLASSPATH nvarchar(256)
</span></span></span><span style="display:flex;"><span><span style="color:#2aa198">, @CLASSPATH = N&#39;</span><span style="color:#859900">C</span>:/<span style="color:#268bd2">testpath</span><span style="color:#2aa198">&#39;
</span></span></span></code></pre></td></tr></table>
</div>
</div><p><strong>Code Snippet 10:</strong> <em>Execute with <em>CLASSPATH</em> Parameter</em></p>
<p>In <em>Code Snippet 10</em> we see how we have defined the <code>@CLASSPATH</code> parameter and set it to the directory where our second Java app is. When we execute the code in <em>Code Snippet 10</em>, we get a surprise:</p>
<p>
  <img src="/images/posts/sql_2k19_java_misc_classpath_error.png" alt="">

</p>
<p><strong>Figure 3:</strong> <em>Exception</em></p>
<p>Hmm, we get an exception, and the exception says something about not being able to find the class (outlined in red). What is that all about, we know that the <code>.class</code> file contains the class and the method? The issue we see here is related to something we discussed in <a href="/post/2018-12-02-sql-server-2019-extensibility-framework--java---hello-world/">SQL Server 2019 Extensibility Framework &amp; Java - Hello World</a>, more specifically permissions. Remember how we said that we need to give the <code>ALL APPLICATION PACKAGES</code> group <code>READ</code> permissions on the <code>CLASSPATH</code> directory. The same is true for the directory(is) you define in the <code>@CLASSPATH</code> parameter. So what we need to do is assign <code>READ</code> permissions to the <code>ALL APPLICATION PACKAGES</code> group, and that should then fix it.</p>
<p>Before we do that, however, go to the <code>CLASSPATH</code> location where you have the renamed <code>Hello.class</code> application, and rename it back to its original name. Then execute the code in <em>Code Snippet 10</em> as it stands. Notice how the execution succeeds, and you get <code>Hello World 1 from SQL Java</code> as output. This indicates that when we execute, we first try and find the application in the <code>@CLASSPATH</code> parameter location, and if that does not succeed we try in the <code>CLASSPATH</code> environment variable location. With this in mind the exception we received in <em>Figure 3</em> makes somewhat more sense:</p>
<ul>
<li>We first tried to execute against the code in the <code>@CLASSPATH</code> parameter location.</li>
<li>An exception was thrown before we could execute the actual code.</li>
<li>We fell back to the <code>CLASSPATH</code> environment variable location.</li>
<li>We didn&rsquo;t find the class (as we renamed it).</li>
<li>We throw the exception we see in <em>Figure 3</em>.</li>
</ul>
<p>Ok, so now we can go ahead and assign the <code>ALL APPLICATION PACKAGES</code> group <code>READ</code> permissions on the location of the <code>@CLASSPATH</code> parameter, and then execute the code in <em>Code Snippet 10</em> again:</p>
<p>
  <img src="/images/posts/sql_2k19_java_misc_classpath_success.png" alt="">

</p>
<p><strong>Figure 4:</strong> <em>Success</em></p>
<p>We see in <em>Figure 4</em> how we get the expected output back when we execute. Assigning the right permissions fixes it as we expected.</p>
<blockquote>
<p><strong>NOTE:</strong> In future SQL Server 2019 CTP releases (and RTM) we most likely will not need to bother with either <code>CLASSPATH</code> or <code>@CLASSPATH</code> as there will be a way to upload JAR files (see below) to the database, and the code gets loaded from there. This is somewhat similar to what we do with SQLCLR today, as well as external libraries for R (<code>CREATE EXTERNAL LIBRARY...</code>).</p>
</blockquote>
<h2 id="jar-files">JAR Files</h2>
<p>So far, in this post as well as previous posts about <strong>SQL Server 2019 Java</strong> extensions, we have dealt with individual <code>.class</code> files, and since the code has just been simple snippets of test code it&rsquo;s okay. In a production environment, outside of SQL Server you would most likely use <strong>JAR</strong> files, as it is common practice and it makes the overall experience more manageable.</p>
<p>JAR stands for <strong>J</strong>ava <strong>AR</strong>chive and is a package file format typically used to aggregate many Java class files and associated metadata and resources (text, images, etc.) into one file for distribution.</p>
<p>To see how this works in SQL Server we start with the <code>Calculator</code> class we see in <em>Code Snippet 2</em>. Compile it into a class file: <code>javac Calculator.java</code>. After compilation, we have a <code>Calculator.class</code>, and we want to create a JAR file containing that <code>Calculator.class</code> file:</p>
<div class="highlight"><div style="color:#586e75;background-color:#eee8d5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#586e75;background-color:#eee8d5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#586e75;background-color:#eee8d5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>jar cvf testjar1.jar Calculator.class
</span></span></code></pre></td></tr></table>
</div>
</div><p><strong>Code Snippet 11:</strong> <em>Create JAR File</em></p>
<p>To create a JAR file, we use something called the <em>Java Archive Tool</em> which is part of the Java Development Kit (JDK). To invoke the <em>Java Archive Tool</em>, we use the <code>jar</code> command as we see in <em>Code Snippet 11</em>. The options and arguments following the <code>jar</code> command in <em>Code Snippet 11</em> are (the following is taken from the <a href="https://docs.oracle.com/javase/tutorial/deployment/jar/build.html">Oracle Java Documentation</a>):</p>
<ul>
<li>The <code>c</code> option indicates that you want to create a JAR file.</li>
<li>The <code>v</code> option produces verbose output while the JAR file builds.</li>
<li>The <code>f</code> option indicates that you want the output to go to a file.</li>
<li>Following <code>cvf</code> is the name of the JAR file you want created.</li>
<li>The last argument is a space-separated list of one or more files that you want to include in your JAR file. This can contain the <code>*</code> wildcard symbol as well as name of directories.</li>
</ul>
<p>When I run the code in <em>Code Snippet 11</em> I see:</p>
<div class="highlight"><div style="color:#586e75;background-color:#eee8d5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#586e75;background-color:#eee8d5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#586e75;background-color:#eee8d5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>W:<span style="color:#2aa198">\p</span>ath_to_my_source_code&gt;jar cvf testjar1.jar Calculator.class
</span></span><span style="display:flex;"><span>added manifest
</span></span><span style="display:flex;"><span>adding: Calculator.class(<span style="color:#268bd2">in</span> = 656) (<span style="color:#268bd2">out</span>= 426)(deflated 35%)
</span></span></code></pre></td></tr></table>
</div>
</div><p><strong>Code Snippet 12:</strong> <em>Output Create JAR File</em></p>
<p>In <em>Code Snippet 12</em> we see how a manifest file is added, together with the <code>.class</code> file. We also see how the <code>.class</code> file is compressed. The manifest file is not required as such, and you can use the <code>M</code> option to indicate you do not want a manifest file. So now we have a JAR file, what do we do with it?</p>
<p>To begin with, delete everything you have in the <code>CLASSPATH</code> location, and also in where <code>@CLASSPATH</code> (<em>Code Snippet 10</em>) points to. Then copy the <code>.jar</code> file created in <em>Code Snippet 12</em> to the <code>CLASSPATH</code> location. The JAR file contains the <code>Calculator</code> class from <em>Code Snippet 2</em>, and we may expect to be able to call it as in <em>Code Snippet 3</em>. However, when we execute the code we get the same error as in <em>Figure 1</em>: <code>... Failed to find class ...</code>. So apparently we cannot call a method in a JAR file the same way as in a <code>.class</code> file. That makes sense when we see how to call an application in a JAR file from the command line:</p>
<div class="highlight"><div style="color:#586e75;background-color:#eee8d5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#586e75;background-color:#eee8d5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#586e75;background-color:#eee8d5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>java -jar &lt;jar_file&gt;
</span></span></code></pre></td></tr></table>
</div>
</div><p><strong>Code Snippet 13:</strong> <em>Calling a JAR File Application</em></p>
<p>In <em>Code Snippet 13</em> we see how we tell the Java launcher, (<code>java</code>), that the application is packaged in a <code>.jar</code> file by using the <code>-jar</code> flag, and we also point to the actual file. To do this in SQL Server, we need to give the full path to the JAR file in the <code>@CLASSPATH</code> variable:</p>
<div class="highlight"><div style="color:#586e75;background-color:#eee8d5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#586e75;background-color:#eee8d5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">6
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">7
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">8
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">9
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#586e75;background-color:#eee8d5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#859900">DECLARE</span> @<span style="color:#268bd2">p1</span> <span style="color:#cb4b16">int</span> = <span style="color:#2aa198;font-weight:bold">21</span>;
</span></span><span style="display:flex;"><span><span style="color:#859900">DECLARE</span> @<span style="color:#268bd2">p2</span> <span style="color:#cb4b16">int</span> = <span style="color:#2aa198;font-weight:bold">21</span>;
</span></span><span style="display:flex;"><span><span style="color:#859900">EXEC</span> <span style="color:#268bd2">sp_execute_external_script</span>
</span></span><span style="display:flex;"><span>  @<span style="color:#859900">language</span> = <span style="color:#268bd2">N</span><span style="color:#2aa198">&#39;Java&#39;</span>
</span></span><span style="display:flex;"><span>, @<span style="color:#268bd2">script</span> = <span style="color:#268bd2">N</span><span style="color:#2aa198">&#39;Calculator.adder&#39;</span>
</span></span><span style="display:flex;"><span>, @<span style="color:#268bd2">params</span> = <span style="color:#268bd2">N</span><span style="color:#2aa198">&#39;@CLASSPATH nvarchar(256), @x int, @y int&#39;</span>
</span></span><span style="display:flex;"><span>, @<span style="color:#268bd2">CLASSPATH</span> = <span style="color:#268bd2">N</span><span style="color:#2aa198">&#39;C:/javacodepath/testjar1.jar&#39;</span>
</span></span><span style="display:flex;"><span>, @<span style="color:#268bd2">x</span> = @<span style="color:#268bd2">p1</span>
</span></span><span style="display:flex;"><span>, @<span style="color:#268bd2">y</span> = @<span style="color:#268bd2">p2</span> 
</span></span></code></pre></td></tr></table>
</div>
</div><p><strong>Code Snippet 14:</strong> <em>Calling a Method in a JAR File</em></p>
<p>We see in <em>Code Snippet 14</em> how we use the <code>@CLASSPATH</code> parameter to indicate what JAR file our method is in,  and when we run the code, we get the expected result back.</p>
<p>So what about the scenario when we have a couple of <code>.class</code> files and one (or more) is part of a package, like what we discussed related to <em>Code Snippet 5</em>? We have:</p>
<ul>
<li>The <code>Calculator</code> class as in <em>Code Snippet 2</em>, compiled to <code>Calculator.class</code>.</li>
<li>The <code>Calculator</code> class in a package <code>mycalculator</code>, compiled to a separate <code>Calculator.class</code>.</li>
</ul>
<p>Remember what we said above how packages need their own directories, and the <code>.class</code> file(s) being inside that directory. I have a directory layout like so:</p>
<p>
  <img src="/images/posts/sql_2k19_java_misc_jar_directories.png" alt="">

</p>
<p><strong>Figure 5:</strong> <em>Project Directory Layout</em></p>
<p>We see in <em>Figure 5</em> how I have a &ldquo;top&rdquo; level directory <code>calcproj</code>, and in that directory, I have the <code>.class</code> file for the <code>Calculator</code> class we see in <em>Code Snippet 2</em>. Under the <code>calcproj</code> directory I have a directory named as the package in <em>Code Snippet 5</em>, and inside that directory is the <code>.class</code> file for the <em>Code Snippet 5</em> <code>Calculator</code> class. To create the <code>.jar</code> file I run some code like so:</p>
<div class="highlight"><div style="color:#586e75;background-color:#eee8d5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#586e75;background-color:#eee8d5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#586e75;background-color:#eee8d5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>W:<span style="color:#2aa198">\&lt;</span>path&gt;<span style="color:#2aa198">\c</span>alcproj&gt;jar cvfM testjar1.jar *
</span></span><span style="display:flex;"><span>adding: Calculator.class(<span style="color:#268bd2">in</span> = 656) (<span style="color:#268bd2">out</span>= 426)(deflated 35%)
</span></span><span style="display:flex;"><span>adding: mycalculator/(<span style="color:#268bd2">in</span> = 0) (<span style="color:#268bd2">out</span>= 0)(stored 0%)
</span></span><span style="display:flex;"><span>adding: mycalculator/Calculator.class(<span style="color:#268bd2">in</span> = 475) (<span style="color:#268bd2">out</span>= 334) (deflated 29%)
</span></span></code></pre></td></tr></table>
</div>
</div><p><strong>Code Snippet 15:</strong> <em>Create JAR File</em></p>
<p>There are a couple of things to look at in <em>Code Snippet 15</em>:</p>
<ul>
<li>I use a wildcard in the <code>jar</code> command, and this recursively adds <code>.class</code> files and directories to the <code>.jar</code> file.</li>
<li>In the output we see how the <code>mycalculator</code> directory gets added together with the <code>Calculator.class</code> file.</li>
</ul>
<p>To check that what we see in <em>Code Snippet 15</em> is correct we can inspect a <code>.jar</code> file by executing: <code>jar tf testjar1.jar</code>:</p>
<div class="highlight"><div style="color:#586e75;background-color:#eee8d5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#586e75;background-color:#eee8d5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#586e75;background-color:#eee8d5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>W:<span style="color:#2aa198">\&lt;</span>path&gt;<span style="color:#2aa198">\c</span>alcproj&gt;jar tf testjar1.jar
</span></span><span style="display:flex;"><span>Calculator.class
</span></span><span style="display:flex;"><span>mycalculator/
</span></span><span style="display:flex;"><span>mycalculator/Calculator.class
</span></span></code></pre></td></tr></table>
</div>
</div><p><strong>Code Snippet 16:</strong> <em>Inspecting JAR File</em></p>
<p>What we see in <em>Code Snippet 16</em> verifies the output in <em>Code Snippet 15</em>.</p>
<p>After copying the <code>.jar</code> file to the location in <em>Code Snippet 14</em> (and overwriting the file there) we can execute as usual (including the path to the <code>.jar</code> file), and see how it all works:</p>
<ul>
<li><code>@script=N'Calculator.adder</code></li>
<li><code>@script=N'mycalculator.Calculator.adder</code></li>
</ul>
<p>Before I summarize this post, a couple of points about JAR files:</p>
<ul>
<li>The location of the JAR file can be wherever Java can get to it.</li>
<li>The directory where the JAR file needs the usual permissions: <code>READ</code> for the <code>ALL APPLICATION PACKAGES</code> group.</li>
<li>The JAR file does not need to be named <code>.jar</code>, it can have any extension or even no extension at all.</li>
<li>If the JAR file is not found where <code>@CLASSPATH</code> parameter says it is, Java fallbacks to the <code>CLASSPATH</code> and tries to find the class and method as per the <code>@script</code> parameter. It does NOT try and find the JAR file.</li>
</ul>
<h2 id="summary">Summary</h2>
<p>In this blog post we discussed:</p>
<ul>
<li>Java packages</li>
<li>Classpaths</li>
<li>JAR files</li>
</ul>
<h4 id="java-packages-1">Java Packages</h4>
<p>We use Java packages to avoid naming conflicts and to keep &ldquo;like-minded&rdquo; things together. The compiled <code>.class</code> file needs to be in a subdirectory with the same name as the package, and we call it from SQL Server as so: <code>@script = N'packagename.classname.methodname</code>. If the package is like <code>p1.p2</code>, then we need two directories <code>p1/p2</code> and call it like: <code>@script = N'p1.p2.classname.methodname'</code>.</p>
<h4 id="classpaths">Classpaths</h4>
<p>In <a href="/post/2018-12-02-sql-server-2019-extensibility-framework--java---hello-world/">SQL Server 2019 Extensibility Framework &amp; Java - Hello World</a> we discussed the <code>CLASSPATH</code> environment variable and said it indicated to Java where our applications are located. In this post, we saw how we could have our applications at other locations and indicate where they are by using the <code>@CLASSPATH</code> parameter. When using the <code>@CLASSPATH</code> parameter, we need to ensure that the path has the right permissions: <code>READ</code> for the <code>ALL APPLICATION PACKAGES</code> group.</p>
<p>If we cannot find the method (<code>ClassName.method</code>) in the location indicated by the <code>@CLASSPATH</code> parameter, we fall back to the location of the <code>CLASSPATH</code> environment variable.</p>
<h4 id="jar-files-1">JAR Files</h4>
<p>We use JAR files to typically aggregate many Java class files and associated metadata and resources into one file for distribution. When we use JAR files from SQL Server, we need to explicitly set the path to the JAR file (including the filename) via the <code>@CLASSPATH</code> parameter.</p>
<h2 id="-finally">~ Finally</h2>
<p>If you have comments, questions etc., please comment on this post or <a href="mailto:niels.it.berglund@gmail.com">ping</a> me.</p>

                

                
                <hr>
                <ul class="pager">
                    
                    <li class="previous">
                        <a href="/post/2018-12-24-sql-server-machine-learning-services---multiple-input-data-sets/" data-toggle="tooltip" data-placement="top" title="SQL Server ML Services - Multiple Input Data Sets">&larr;
                            Previous Post</a>
                    </li>
                    
                    
                    <li class="next">
                        <a href="/post/2019-01-06-interesting-stuff---christmas-new-year-week-1-2019/" data-toggle="tooltip" data-placement="top" title="Interesting Stuff - Christmas, New Year, Week 1, 2019">Next
                            Post &rarr;</a>
                    </li>
                    
                </ul>
                

                


<div id="disqus-comment"></div>
<div id="disqus_thread"></div>
<script type="application/javascript">
    window.disqus_config = function () {
    
    
    
    };
    (function() {
        if (["localhost", "127.0.0.1"].indexOf(window.location.hostname) != -1) {
            document.getElementById('disqus_thread').innerHTML = 'Disqus comments not available by default when the website is previewed locally.';
            return;
        }
        var d = document, s = d.createElement('script'); s.async = true;
        s.src = '//' + "manageddata" + '.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="https://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>



            </div>

            
            
            <div class="
                col-lg-2 col-lg-offset-0
                visible-lg-block
                sidebar-container
                catalog-container">
                <div class="side-catalog">
                    <hr class="hidden-sm hidden-xs">
                    <h5>
                        <a class="catalog-toggle" href="#">CATALOG</a>
                    </h5>
                    <ul class="catalog-body"></ul>
                </div>
            </div>
            

            
            <div class="
                col-lg-8 col-lg-offset-2
                col-md-10 col-md-offset-1
                sidebar-container">

                
                

                
                
            </div>
        </div>
    </div>
</article>




<footer>
    <div class="container">
        <div class="row">
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                <ul class="list-inline text-center">                  
                    
                    <li>
                        <a href="mailto:niels.it.berglund@gmail.com">
                            <span class="fa-stack fa-lg">
                                <i class="fas fa-circle fa-stack-2x"></i>
                                <i class="fas fa-envelope fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
		           
                    
                    <li>
                        <a href="https://twitter.com/nielsberglund">
                            <span class="fa-stack fa-lg">
                                <i class="fas fa-circle fa-stack-2x"></i>
                                <i class="fab fa-twitter fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
                    
                    
                    
                    

		            
                    
                    
                    <li>
                        <a target="_blank" href="https://github.com/nielsberglund">
                            <span class="fa-stack fa-lg">
                                <i class="fas fa-circle fa-stack-2x"></i>
                                <i class="fab fa-github fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
		            
                    
                    
                    
                    <li>
                        <a target="_blank" href="https://www.linkedin.com/in/niels-berglund-0122593">
                            <span class="fa-stack fa-lg">
                                <i class="fas fa-circle fa-stack-2x"></i>
                                <i class="fab fa-linkedin fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
		           
                    
                    <li>
                        <a target="_blank" href="https://medium.com/@nielsberglund">
                            <span class="fa-stack fa-lg">
                                <i class="fas fa-circle fa-stack-2x"></i>
                                <i class="fab fa-medium fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
                    
                    
                    <li>
                        <a target="_blank" href="https://stackoverflow.com/users/7656880/niels-berglund">
                            <span class="fa-stack fa-lg">
                                <i class="fas fa-circle fa-stack-2x"></i>
                                <i class="fab fa-stack-overflow fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
                    
                    
                    
                    
                    <li>
                        <a target="_blank" href="https://fosstodon.org/@nielsb">
                            <span class="fa-stack fa-lg">
                                <i class="fas fa-circle fa-stack-2x"></i>
                                <i class="fab fa-mastodon fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
                    
                    
            
            
            
           
                   <li>
                       <a href='' rel="alternate" type="application/rss+xml" title="Niels Berglund" >
                           <span class="fa-stack fa-lg">
                               <i class="fas fa-circle fa-stack-2x"></i>
                               <i class="fas fa-rss fa-stack-1x fa-inverse"></i>
                           </span>
                       </a>
                   </li>
            
             </ul>
		<p class="copyright text-muted">
                    Copyright &copy; Niels Berglund 2023
                    <br>
                    <a href="https://themes.gohugo.io/hugo-theme-cleanwhite">CleanWhite Hugo Theme</a> by <a href="https://zhaohuabing.com">Huabing</a> |
                    <iframe
                        style="margin-left: 2px; margin-bottom:-5px;"
                        frameborder="0" scrolling="0" width="100px" height="20px"
                        src="https://ghbtns.com/github-btn.html?user=zhaohuabing&repo=hugo-theme-cleanwhite&type=star&count=true" >
                    </iframe>
                </p>
            </div>
        </div>
    </div>
</footer>




<script>
    function loadAsync(u, c) {
      var d = document, t = 'script',
          o = d.createElement(t),
          s = d.getElementsByTagName(t)[0];
      o.src = u;
      if (c) { o.addEventListener('load', function (e) { c(null, e); }, false); }
      s.parentNode.insertBefore(o, s);
    }
</script>






<script>
    
    if($('#tag_cloud').length !== 0){
        loadAsync("/js/jquery.tagcloud.js",function(){
            $.fn.tagcloud.defaults = {
                
                color: {start: '#bbbbee', end: '#0085a1'},
            };
            $('#tag_cloud a').tagcloud();
        })
    }
</script>


<script>
    loadAsync("https://cdn.jsdelivr.net/npm/fastclick@1.0.6/lib/fastclick.min.js", function(){
        var $nav = document.querySelector("nav");
        if($nav) FastClick.attach($nav);
    })
</script>






<script type="text/javascript">
    function generateCatalog(selector) {

        
        
        
        
            _containerSelector = 'div.post-container'
        

        
        var P = $(_containerSelector), a, n, t, l, i, c;
        a = P.find('h1,h2,h3,h4,h5,h6');

        
        $(selector).html('')

        
        a.each(function () {
            n = $(this).prop('tagName').toLowerCase();
            i = "#" + $(this).prop('id');
            t = $(this).text();
            c = $('<a href="' + i + '" rel="nofollow">' + t + '</a>');
            l = $('<li class="' + n + '_nav"></li>').append(c);
            $(selector).append(l);
        });
        return true;
    }

    generateCatalog(".catalog-body");

    
    $(".catalog-toggle").click((function (e) {
        e.preventDefault();
        $('.side-catalog').toggleClass("fold")
    }))

    


    loadAsync("\/js\/jquery.nav.js", function () {
        $('.catalog-body').onePageNav({
            currentClass: "active",
            changeHash: !1,
            easing: "swing",
            filter: "",
            scrollSpeed: 700,
            scrollOffset: 0,
            scrollThreshold: .2,
            begin: null,
            end: null,
            scrollChange: null,
            padding: 80
        });
    });
</script>






</body>
</html>
